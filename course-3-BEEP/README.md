# 51 单片机学习日记：有缘蜂鸣器实验
## 2025 年 6 月 4 日 星期三
内部自带振荡电路，通电即发声
控制简单，只需高低电平控制开关
频率固定，无法改变音调
# 实现项目

```
让蜂鸣器发出声音，一段时间后关闭
```
# 实验代码实现
1. 有源蜂鸣器控制
```c
#include"reg52.h"
#include"intrins.h"
typedef unsigned int u16;
typedef unsigned char u8;

sbit BEEP=P2^5;


void delay_10us(u16 ten_us)
{
	while(ten_us--);
	
}

void main() {
    u16 i=2000;  // 初始化计数器
    
    while(1) {   // 主循环
        while(i--) {  // 循环2000次
            BEEP = !BEEP;  // 翻转蜂鸣器控制电平（产生方波） 脉冲信号
            delay_10us(200); // 延时约200×10us=2ms 设置频率周期
        }
        i=0;      // 重置计数器
        BEEP=0;   // 关闭蜂鸣器
    }
}
```
# 工作原理解释：
# 方波生成：
BEEP = !BEEP不断翻转P2.5引脚电平
每次翻转后延时2ms，因此一个完整周期为4ms
产生的方波频率 = 1/(4ms) = 250Hz
# 持续时间：
循环2000次，每次4ms
总发声时间 = 2000×4ms = 8秒
# 静音阶段：
发声结束后BEEP=0强制关闭蜂鸣器
由于外层是while(1)循环，程序会不断重复8秒发声→静音的过程
4. 关键点说明
适用蜂鸣器类型：这段代码适合驱动无源蜂鸣器（因为需要外部提供方波）
# 可调参数：
修改delay_10us(200)中的200可改变音调
修改初始值i=2000可改变发声时长

## 未解决问题
为什么改变引脚P2蜂鸣器就无法发出声音 是否与频率有关
如何添加控制按钮控器蜂鸣器

